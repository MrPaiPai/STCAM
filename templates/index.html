{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</title>
  
  <style>
    body {
      padding-top: 60px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á navbar */
    }

    /* Styling ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö navbar */
    .base-navbar {
      background-color: #3498db;
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
    }

    .base-menu-container {
      position: relative;
    }

    .base-menu {
      font-size: 18px;
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 10px 15px;
      background-color: #2ecc71;
      border-radius: 5px;
      cursor: pointer;
      display: inline-block;
    }

    .base-menu:hover {
      background-color: #27ae60;
    }

    .base-dropdown {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background-color: white;
      min-width: 200px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      z-index: 100;
    }

    .base-dropdown a {
      display: block;
      padding: 12px 15px;
      text-decoration: none;
      color: #333;
      font-size: 16px;
      transition: background 0.3s ease;
    }

    .base-dropdown a:hover {
      background-color: #f1f1f1;
    }

    .base-menu-container:hover .base-dropdown {
      display: block;
    }

    .base-right-side {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .base-right-side span {
      color: white;
      font-size: 16px;
    }

    .base-right-side a, .base-logout-btn {
      color: white;
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 5px;
      background-color: #e67e22;
      transition: background-color 0.3s ease;
    }

    .base-right-side a:hover {
      background-color: #d35400;
    }

    .base-logout-btn {
      background-color: #c0392b;
      border: none;
      cursor: pointer;
    }

    .base-logout-btn:hover {
      background-color: #a93226;
    }

    @media (max-width: 768px) {
      .base-navbar {
        position: fixed;
        flex-direction: column;
        align-items: flex-start;
      }
      .base-right-side {
        margin-top: 10px;
      }
      .base-dropdown {
        position: static;
        width: 100%;
      }
      .base-menu-container:hover .base-dropdown {
        display: none;
      }
      .base-menu-container:focus-within .base-dropdown {
        display: block;
      }
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö container */
    .activity-card-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: flex-start; /* ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢ */
        padding: 20px;
        background-color: transparent; /* ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
        width: 100%; /* ‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        max-width: 100%; /* ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
        margin: 0; /* ‡∏•‡∏ö margin */
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡πå‡∏î */
    .activity-card {
        background: #fff; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 15px;
        width: calc(33.33% - 20px); /* 3 ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ñ‡∏ß */
        text-align: center;
        transition: transform 0.3s ease-in-out;
    }

    /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå hover */
    .activity-card:hover {
        transform: translateY(-5px);
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏° */
    .activity-card form button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .activity-card form button:hover {
        background-color: #45a049;
    }
    
    /* h1 ‡∏à‡∏±‡∏î‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
    .center-container {
        text-align: center;
        padding: 20px 0; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡∏ö‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡πà‡∏≤‡∏á */
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö layout ‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô */
    .content-wrapper {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 20px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á */
        padding: 20px;
        width: 100%; /* ‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        max-width: 100%; /* ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
        margin: 0; /* ‡∏•‡∏ö margin */
        background-color: transparent; /* ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
    }

    /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô */
    .activity-section {
        flex: 2; /* ‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ */
        width: 100%; /* ‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        background-color: transparent; /* ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
    }

    .announcement-box {
        flex: 1; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° */
        background: #fff; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 350px;
        height: fit-content; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á 3 ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ñ‡∏ß */
    @media (max-width: 1200px) {
        .activity-card {
            width: calc(50% - 20px); /* 2 ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ñ‡∏ß */
        }
    }

    @media (max-width: 768px) {
        .activity-card {
            width: 100%; /* 1 ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ñ‡∏ß */
        }
    }

    /* ‡πÉ‡∏ä‡πâ focus-within ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î dropdown ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    .base-menu-container:focus-within .base-dropdown {
      display: block;
    }
</style>

</head>
<body>
  <!-- Navbar -->
  <div class="base-navbar">
    <div class="base-menu-container">
      <a href="#" class="base-menu">‡πÄ‡∏°‡∏ô‡∏π</a>
      <div class="base-dropdown">
        <a href="{% url 'home' %}">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="{% url 'track_participation' %}">üìä ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</a>
        <a href="{% url 'upload_proof' %}">üìé ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</a>
        <a href="{% url 'edit_userprofile' %}">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
        <a href="{% url 'manage_participations' %}">‚öôÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</a>
      </div>
    </div>
    <div class="base-right-side">
      {% if user.is_authenticated %}
        <span>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, {{ user.username }}</span>
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="base-logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </form>
      {% else %}
        <a href="{% url 'login' %}">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
        <a href="{% url 'register' %}">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
      {% endif %}
    </div>
  </div>

  <div class="center-container">
    <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h1>
  </div>

  <div class="content-wrapper">
    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° -->
    <div class="activity-section">
        <div class="center-container">
            <h1>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
        </div>
        
        <div class="activity-card-container">
            {% for activity in activities %}
                <div class="activity-card">
                    <h3>{{ activity.name }}</h3>
                    <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> {{ activity.description }}</p> 
                    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°:</strong> {{ activity.start_date }}</p>
                    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î:</strong> {{ activity.end_date }}</p>
        
                    {% if activity.images.all %}
                        {% for image in activity.images.all %}
                            <img src="{{ image.image.url }}" alt="‡∏£‡∏π‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°" style="width: 100%; border-radius: 5px;">
                        {% endfor %}
                    {% else %}
                        <p style="color: red;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
                    {% endif %}
        
                    <a href="{% url 'activity_info' activity.id %}" class="btn">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>
                </div>
            {% empty %}
                <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p> 
            {% endfor %}
        </div>
    </div>

    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® -->
    <div class="announcement-box">
      <h2>‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h2>
      {% for announcement in announcements %}
          <div class="announcement-item">
              <h3>{{ announcement.title }}</h3>
              <p>{{ announcement.content }}</p>
              <small>‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ announcement.created_at|date:"d/m/Y H:i" }}</small>
          </div>
      {% empty %}
          <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>
      {% endfor %}
    </div>

  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        const menuContainer = document.querySelector(".base-menu-container");
        const menuButton = document.querySelector(".base-menu");
        const dropdown = menuContainer.querySelector(".base-dropdown");

        // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏° Menu
        menuButton.addEventListener("click", function (event) {
            event.stopPropagation(); // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
            menuContainer.classList.toggle("active");
        });

        // ‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô
        document.addEventListener("click", function () {
            menuContainer.classList.remove("active");
        });

        // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô dropdown ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô
        dropdown.addEventListener("click", function (event) {
            event.stopPropagation(); // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
        });
    });
  </script>
</body>
</html>