{% load static %}
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á gradient */
    body {
      margin: 0;
      padding-top: 60px;
      min-height: 100vh;
      background: linear-gradient(135deg, #f0f4f8, #ffffff); /* Gradient ‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô */
      overflow-x: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
      position: relative;
    }

    /* ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ */
    .base-container {
      position: relative;
      z-index: 10;
      max-width: 1400px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î */
      width: 95%;
      margin: 80px auto 30px;
      padding: 20px;
      background: white;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }

    /* ‡πÄ‡∏û‡∏¥‡πà‡∏° style ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
    .table-container {
      width: 100%;
      overflow-x: auto;
      margin: 1rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 0.75rem;
      white-space: nowrap;
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö Navbar ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ index */
    .base-navbar {
        background: linear-gradient(to right, #2563eb, #1e40af);
        width: 100%;
        position: fixed;
        top: 0;
        left: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        z-index: 50;
    }

    .base-menu {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background-color: #22c55e;
        color: white;
        font-weight: 600;
        border-radius: 0.5rem;
        transition: all 0.2s;
    }

    .base-menu:hover {
        background-color: #16a34a;
    }

    .base-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        margin-top: 0.5rem;
        min-width: 16rem;
        background-color: white;
        border-radius: 0.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        z-index: 50;
    }

    .base-dropdown a {
        display: block;
        padding: 0.75rem 1rem;
        color: #374151;
        font-size: 0.875rem;
        transition: all 0.2s;
    }

    .base-dropdown a:hover {
        background-color: #f3f4f6;
    }

    .base-right-side {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .base-right-side span {
        color: white;
        font-weight: 500;
    }

    .base-right-side a, 
    .base-logout-btn {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background-color: #f59e0b;
        color: white;
        font-weight: 600;
        border-radius: 0.5rem;
        transition: all 0.2s;
        text-decoration: none;
    }

    .base-right-side a:hover {
        background-color: #d97706;
    }

    .base-logout-btn {
        background-color: #ef4444;
        border: none;
        cursor: pointer;
    }

    .base-logout-btn:hover {
        background-color: #dc2626;
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö staff menu */
    .staff-menu-section {
        border-top: 1px solid #e5e7eb;
        margin-top: 0.5rem;
        padding-top: 0.5rem;
    }

    .staff-menu-header {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: #6b7280;
        background-color: #f9fafb;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .base-navbar {
        position: fixed;
        flex-direction: column;
        align-items: flex-start;
      }
      .base-right-side {
        margin-top: 10px;
        margin-right: 0;
      }
      .base-dropdown {
        position: static;
        width: 100%;
      }
      .base-menu-container.active .base-dropdown {
        display: block;
      }
      .base-container {
        margin: 150px 15px 15px;
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="fixed top-0 left-0 w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white p-4 shadow-lg z-50 flex justify-between items-center">
    <div class="flex-1">
        {% if user.is_authenticated %}
            <div class="base-menu-container">
                <button class="base-menu bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" id="menuButton">‡πÄ‡∏°‡∏ô‡∏π</button>
                <div class="base-dropdown absolute top-full left-0 mt-2 bg-white text-gray-800 rounded-lg shadow-xl hidden" id="dropdown">
                    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ -->
                    <div class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
                    <a href="{% url 'home' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
                    <a href="{% url 'track_participation' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200">üìä ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</a>
                    <a href="{% url 'upload_proof' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200">üìé ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</a>
                    <a href="{% url 'edit_userprofile' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
                    
                    {% if user.is_staff or user.is_superuser %}
                        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
                        <div class="border-t border-gray-200 mt-2">
                            <div class="px-4 py-2 bg-blue-50 text-sm font-medium text-blue-600">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</div>
                            <a href="{% url 'pending_users' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200 text-blue-600 font-medium">
                                ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
                                {% if pending_users_count %}
                                    <span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full float-right">
                                        {{ pending_users_count }}
                                    </span>
                                {% endif %}
                            </a>
                            <!-- <a href="{% url 'student_list' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200 text-blue-600 font-medium">
                                üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                            </a> -->
                        </div>

                        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° -->
                        <div class="border-t border-gray-200">
                            <div class="px-4 py-2 bg-green-50 text-sm font-medium text-green-600">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                            <a href="{% url 'manage_participations' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200 text-green-600 font-medium">
                                ‚öôÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°
                            </a>
                            <a href="{% url 'generate_report' %}" class="block px-4 py-2 hover:bg-gray-100 transition duration-200 text-green-600 font-medium">
                                üìÑ ‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                            </a>
                        </div>

                        {% if user.is_superuser %}
                            <div class="border-t border-gray-200">
                                <div class="px-4 py-2 bg-red-50 text-sm font-medium text-red-600">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</div>
                                <a href="/admin/" class="block px-4 py-2 hover:bg-gray-100 transition duration-200 text-red-600 font-medium">
                                    üë®‚Äçüíº Django Admin
                                </a>
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        {% endif %}
    </div>

    <div class="flex items-center gap-4">
        {% if user.is_authenticated %}
            <span class="text-white font-medium">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, {{ user.username }}</span>
            <form method="post" action="{% url 'logout' %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                    <i class="fas fa-sign-out-alt mr-2"></i>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                </button>
            </form>
        {% else %}
            <a href="{% url 'login' %}" class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                <i class="fas fa-sign-in-alt mr-2"></i>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </a>
            <a href="{% url 'register' %}" class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                <i class="fas fa-user-plus mr-2"></i>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
            </a>
        {% endif %}
    </div>
</nav>

  <div class="base-container">
    {% block content %}
    {% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
    const menuButton = document.getElementById("menuButton");
    const dropdown = document.getElementById("dropdown");
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ elements ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (!menuButton || !dropdown) return;

    menuButton.addEventListener("click", function (event) {
        event.stopPropagation();
        dropdown.classList.toggle("hidden");  // ‡πÉ‡∏ä‡πâ toggle ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    });

    document.addEventListener("click", function (event) {
        if (!dropdown.classList.contains("hidden") && 
            !menuButton.contains(event.target) && 
            !dropdown.contains(event.target)) {
            dropdown.classList.add("hidden");
        }
    });

    dropdown.addEventListener("click", function (event) {
        event.stopPropagation();
    });
});
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>